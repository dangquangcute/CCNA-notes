# Phần 1 kích thước tối đa của một phân mảnh segment (MTU)


-   Chức năng chính của lớp transport chủ yếu là đảm bảo quá trình truyền thông từ đầu cuối đến thiết bị đầu cuối. Máy tính chúng ta sẽ móc nối đến web server và tải dữ liệu về, toàn bộ giao diện web sẽ được phân mảnh thành nhiều segment. 
![Alt text](<Screenshot 2023-09-03 at 18.14.46.png>)
Giả sử trường hợp này giao diện web được phân mảnh thành 9000 segment rồi sau đó được tải về cho máy trạm , khi truyền thông có thể mất mát một số dữ liệu cụ thể trong tình huống này nó chỉ tải được về khoảng 8990. Nó sẽ phát hiện ra là có 10 segment bị mất, lúc này nó sẽ yêu cầu server gửi lại cho nó những segment bị mất thông qua cơ chế trao đổi dữ liệu của lớp Transport.
-   Sau đây chúng ta sẽ khảo sát ví dụ để chỉ ra kích thước tối đa của một segment là bao nhiêu?![Alt text](<Screenshot 2023-09-03 at 18.18.41.png>)
Trong môi trường mạng của chúng ta sẽ có tham số là MTU (Maximum Transmission Unit) trên cáp đồng, switch. Các cổng có MTU là 1500 nghĩa là cổng này chỉ có thể truyền và nhận gói tin, packet tối đa là 1500byte. Nếu nó nhận được gói tin lớn hơn 1500byte thì card mạng sẽ huỷ gói tin này. Tuy nhiên 1 số thiết bị như là server nó được trang bị cổng giao tiếp quang thì sẽ có thể nhận được tín hiệu tối da là 9000byte nên nó có thể nhận các packet lên đến 900byte. Như vậy tốc độ truyền dữ liệu trên cổng cab quang này sẽ lớn hơn hẳn những cổng sử dụng cab đồng chỉ có 1500byte. Nếu thông số MTU là 1500 thì chúng ta suy luận ra được kích thước tối đa 1 segment là 1480byte do ipheader chiếm 20byte (phần data của packet gửi chính là segment hay là đơn vị dữ liệu tới lớp transport). Tương tự với cổng cab quang hoặc cổng giao tiếp 1gb thì với MTU 9000byte thì kích thước segment tối đa chỉ là 898(data) + 20byte của ipheader.
-   Trường hợp ở đây làm thể nào để máy server gửi packet tận 9000byte nhưng máy trạm chỉ có cổng giao tiếp là 1500byte thì chắc chắn quá trình truyền thông sẽ thất bại. Như vậy trước quá trình truyền thông của 2 thiết bị thì nó cần trải qua quá trình gọi là bắt tay ba bước. Cụ thể nếu mà 2 bên sử dụng kích thước MTU khác nhau thì nó sẽ thỏa thuận sử dụng mức MTU thấp hơn để truyển thông 